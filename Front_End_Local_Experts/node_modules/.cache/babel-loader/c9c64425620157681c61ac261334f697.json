{"ast":null,"code":"'use strict';\n\nvar parse = require('./parse');\n\nvar listeners = {};\nvar listening = false;\n\nfunction listen() {\n  if (global.addEventListener) {\n    global.addEventListener('storage', change, false);\n  } else if (global.attachEvent) {\n    global.attachEvent('onstorage', change);\n  } else {\n    global.onstorage = change;\n  }\n}\n\nfunction change(e) {\n  if (!e) {\n    e = global.event;\n  }\n\n  var all = listeners[e.key];\n\n  if (all) {\n    all.forEach(fire);\n  }\n\n  function fire(listener) {\n    listener(parse(e.newValue), parse(e.oldValue), e.url || e.uri);\n  }\n}\n\nfunction on(key, fn) {\n  if (listeners[key]) {\n    listeners[key].push(fn);\n  } else {\n    listeners[key] = [fn];\n  }\n\n  if (listening === false) {\n    listen();\n  }\n}\n\nfunction off(key, fn) {\n  var ns = listeners[key];\n\n  if (ns.length > 1) {\n    ns.splice(ns.indexOf(fn), 1);\n  } else {\n    listeners[key] = [];\n  }\n}\n\nmodule.exports = {\n  on: on,\n  off: off\n};","map":{"version":3,"sources":["/Users/benmiriello/Development/code/Local_Experts_App/node_modules/local-storage/tracking.js"],"names":["parse","require","listeners","listening","listen","global","addEventListener","change","attachEvent","onstorage","e","event","all","key","forEach","fire","listener","newValue","oldValue","url","uri","on","fn","push","off","ns","length","splice","indexOf","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,KAAK,GAAGC,OAAO,CAAC,SAAD,CAAnB;;AACA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,SAAS,GAAG,KAAhB;;AAEA,SAASC,MAAT,GAAmB;AACjB,MAAIC,MAAM,CAACC,gBAAX,EAA6B;AAC3BD,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCC,MAAnC,EAA2C,KAA3C;AACD,GAFD,MAEO,IAAIF,MAAM,CAACG,WAAX,EAAwB;AAC7BH,IAAAA,MAAM,CAACG,WAAP,CAAmB,WAAnB,EAAgCD,MAAhC;AACD,GAFM,MAEA;AACLF,IAAAA,MAAM,CAACI,SAAP,GAAmBF,MAAnB;AACD;AACF;;AAED,SAASA,MAAT,CAAiBG,CAAjB,EAAoB;AAClB,MAAI,CAACA,CAAL,EAAQ;AACNA,IAAAA,CAAC,GAAGL,MAAM,CAACM,KAAX;AACD;;AACD,MAAIC,GAAG,GAAGV,SAAS,CAACQ,CAAC,CAACG,GAAH,CAAnB;;AACA,MAAID,GAAJ,EAAS;AACPA,IAAAA,GAAG,CAACE,OAAJ,CAAYC,IAAZ;AACD;;AAED,WAASA,IAAT,CAAeC,QAAf,EAAyB;AACvBA,IAAAA,QAAQ,CAAChB,KAAK,CAACU,CAAC,CAACO,QAAH,CAAN,EAAoBjB,KAAK,CAACU,CAAC,CAACQ,QAAH,CAAzB,EAAuCR,CAAC,CAACS,GAAF,IAAST,CAAC,CAACU,GAAlD,CAAR;AACD;AACF;;AAED,SAASC,EAAT,CAAaR,GAAb,EAAkBS,EAAlB,EAAsB;AACpB,MAAIpB,SAAS,CAACW,GAAD,CAAb,EAAoB;AAClBX,IAAAA,SAAS,CAACW,GAAD,CAAT,CAAeU,IAAf,CAAoBD,EAApB;AACD,GAFD,MAEO;AACLpB,IAAAA,SAAS,CAACW,GAAD,CAAT,GAAiB,CAACS,EAAD,CAAjB;AACD;;AACD,MAAInB,SAAS,KAAK,KAAlB,EAAyB;AACvBC,IAAAA,MAAM;AACP;AACF;;AAED,SAASoB,GAAT,CAAcX,GAAd,EAAmBS,EAAnB,EAAuB;AACrB,MAAIG,EAAE,GAAGvB,SAAS,CAACW,GAAD,CAAlB;;AACA,MAAIY,EAAE,CAACC,MAAH,GAAY,CAAhB,EAAmB;AACjBD,IAAAA,EAAE,CAACE,MAAH,CAAUF,EAAE,CAACG,OAAH,CAAWN,EAAX,CAAV,EAA0B,CAA1B;AACD,GAFD,MAEO;AACLpB,IAAAA,SAAS,CAACW,GAAD,CAAT,GAAiB,EAAjB;AACD;AACF;;AAEDgB,MAAM,CAACC,OAAP,GAAiB;AACfT,EAAAA,EAAE,EAAEA,EADW;AAEfG,EAAAA,GAAG,EAAEA;AAFU,CAAjB","sourcesContent":["'use strict';\n\nvar parse = require('./parse');\nvar listeners = {};\nvar listening = false;\n\nfunction listen () {\n  if (global.addEventListener) {\n    global.addEventListener('storage', change, false);\n  } else if (global.attachEvent) {\n    global.attachEvent('onstorage', change);\n  } else {\n    global.onstorage = change;\n  }\n}\n\nfunction change (e) {\n  if (!e) {\n    e = global.event;\n  }\n  var all = listeners[e.key];\n  if (all) {\n    all.forEach(fire);\n  }\n\n  function fire (listener) {\n    listener(parse(e.newValue), parse(e.oldValue), e.url || e.uri);\n  }\n}\n\nfunction on (key, fn) {\n  if (listeners[key]) {\n    listeners[key].push(fn);\n  } else {\n    listeners[key] = [fn];\n  }\n  if (listening === false) {\n    listen();\n  }\n}\n\nfunction off (key, fn) {\n  var ns = listeners[key];\n  if (ns.length > 1) {\n    ns.splice(ns.indexOf(fn), 1);\n  } else {\n    listeners[key] = [];\n  }\n}\n\nmodule.exports = {\n  on: on,\n  off: off\n};\n"]},"metadata":{},"sourceType":"script"}